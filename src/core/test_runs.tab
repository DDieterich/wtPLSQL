
--
--  Test Runs Table Installation
--

create sequence test_runs_seq;

create global temporary table test_runs
   (id             number(38)     constraint test_runs_nn1 not null
   ,start_dtm      timestamp      constraint test_runs_nn2 not null
   ,runner_name    varchar2(128)  constraint test_runs_nn3 not null
   ,runner_owner   varchar2(128)  constraint test_runs_nn4 not null
   ,dbout_owner    varchar2(128)
   ,dbout_name     varchar2(128)
   ,dbout_type     varchar2(20)
   ,profiler_runid number
   ,end_dtm        timestamp
   ,error_message  varchar2(4000)
   ,constraint test_runs_pk primary key (id)
   ,constraint test_runs_nk1 unique (start_dtm, runner_name, runner_owner)
   ) on commit preserve rows;

comment on table test_runs is 'Test Run data for each execution of the WTPLSQL_RUN procedure.';
comment on column test_runs.id  is 'Primary (Surrogate) Key for each Test Run';
comment on column test_runs.start_dtm is 'Date/time (and fractional seconds) this Test Run started. Natural Key 1 part 1';
comment on column test_runs.runner_name is 'Name of the package with the WTPLSQL_RUN procedure. Natural Key 1 part 2';
comment on column test_runs.runner_owner is 'Owner of the package with the WTPLSQL_RUN procedure. Natural Key 2 part 3';
comment on column test_runs.end_dtm is 'Date/time (and fractional seconds) this Test Run ended.';
comment on column test_runs.dbout_owner is 'Optional Owner of the Database Object Under Test (DBOUT).';
comment on column test_runs.dbout_name is 'Optional Name of the Database Object Under Test (DBOUT).';
comment on column test_runs.dbout_type is 'Optional Type of the Database Object Under Test (DBOUT).';
comment on column test_runs.profiler_runid is 'Optional DBMS_PROFILER unique run identifier from plsql_profiler_runnumber sequence';
comment on column test_runs.error_message is 'Optional Last error messages from this Test Run.';

grant select on test_runs to public;
grant insert on test_runs to public;
