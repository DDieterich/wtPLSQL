
--
--  DBOUT Profiles Table Installation
--

create global temporary table dbout_profiles
   (test_run_id    number(38)     constraint dbout_profiles_nn2 not null
   ,line#          number(6)      constraint dbout_profiles_nn3 not null
   ,status         varchar2(4)    constraint dbout_profiles_nn4 not null
   ,text           varchar2(4000) constraint dbout_profiles_nn5 not null
   ,total_occur    number(9)      constraint dbout_profiles_nn6 not null
   ,total_time     number(9)      constraint dbout_profiles_nn7 not null
   ,min_time       number(9)      constraint dbout_profiles_nn8 not null
   ,max_time       number(9)      constraint dbout_profiles_nn9 not null
   ,constraint dbout_profiles_pk primary key (test_run_id, line#)
   --,constraint dbout_profiles_fk1 foreign key (test_run_id)
   --    references test_runs (id)
   ,constraint dbout_profiles_ck1 check (status in ('HIT','MISS','EXCL','ANNO','UNKN'))
   ) on commit preserve rows;

comment on table dbout_profiles is 'PL/SQL Profiler data for Database Object Under Test (DBOUT).';
comment on column dbout_profiles.test_run_id is 'Foreign Key for the Test Run, Primary Key part 1.';
comment on column dbout_profiles.line# is 'Line number from the DBOUT, Primary Key part 2.';
comment on column dbout_profiles.status is 'Hit/Missed/Excluded/Annotated/Unknown Status from the Profiler';
comment on column dbout_profiles.text is 'Source code text for this line.';
comment on column dbout_profiles.total_occur is 'Number of times this line was executed.';
comment on column dbout_profiles.total_time is 'Total time spent excuting this line.';
comment on column dbout_profiles.min_time is 'Minimum execution time for this line.';
comment on column dbout_profiles.max_time is 'Maximum execution time for this line.';

grant select on dbout_profiles to public;
grant insert on dbout_profiles to public;
grant update on dbout_profiles to public;
