<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=Cp1252" />
<script src="WT_TEXT_REPORT/report.js" type="text/javascript"></script>
<link href="WT_TEXT_REPORT/report.css" type="text/css" rel="stylesheet">
</head>
<body>
<div class="banner">
<table width="98%"><tr>
<td><h2 class="banner">WT_TEXT_REPORT</h2></td>
</tr></table></div>
<div id="maintabs">
<div class="currentmaintab" onclick="onSelectMainTab(this, 0)">
<div>
<p>Doc</p>
</div>
</div>
<div class="maintab" onclick="onSelectMainTab(this, 1)">
<div>
<p>Details</p>
</div>
</div>
<div class="maintab" onclick="onSelectMainTab(this, 2)">
<div>
<p>Grants</p>
</div>
</div>
<div class="maintab" onclick="onSelectMainTab(this, 3)">
<div>
<p>References</p>
</div>
</div>
<div class="maintab" onclick="onSelectMainTab(this, 4)">
<div>
<p>Dependencies</p>
</div>
</div>
<div class="maintab" onclick="onSelectMainTab(this, 5)">
<div>
<p>Code</p>
</div>
</div>
</div>
<br/>
<div id="masterreports">
<div id="Master.0">
<div class="currentmasterreport">
<TABLE CELLSPACING="0" CELLPADDING="1" WIDTH="100%" BORDER="0">
<TR><TD CLASS="NavBarRow3" VALIGN="top"><FONT SIZE="-2">      SUMMARY:  <A HREF="#field_summary">FIELD</A> | <A HREF="#type_summary">TYPE</A> | <A HREF="#method_summary">METHOD</A></FONT></TD><TD CLASS="NavBarRow3" VALIGN="top"><FONT SIZE="-2"></TR></TABLE><HR><P>--------------------</P><HR><TABLE CELLSPACING="0" CELLPADDING="1" WIDTH="100%" BORDER="0">
<TR><TD CLASS="NavBarRow3" VALIGN="top"><FONT SIZE="-2">      SUMMARY:  <A HREF="#field_summary">FIELD</A> | <A HREF="#type_summary">TYPE</A> | <A HREF="#method_summary">METHOD</A></FONT></TD><TD CLASS="NavBarRow3" VALIGN="top"><FONT SIZE="-2"></TR></TABLE></div>
</div>
<div id="Master.1">
<div class="masterreport">
<table id="Table.0" cellpadding="0" cellspacing="0" summary="">
<th>NAME</th>
<th>VALUE</th>
</tr>
<tr>
<td>OWNER</td>
<td>WTP</td>
</tr>
<tr>
<td>OBJECT_NAME</td>
<td>WT_TEXT_REPORT</td>
</tr>
<tr>
<td>SUBOBJECT_NAME</td>
<td>null</td>
</tr>
<tr>
<td>OBJECT_ID</td>
<td>42814</td>
</tr>
<tr>
<td>DATA_OBJECT_ID</td>
<td>null</td>
</tr>
<tr>
<td>OBJECT_TYPE</td>
<td>PACKAGE&nbsp;BODY</td>
</tr>
<tr>
<td>CREATED</td>
<td>25-NOV-2018&nbsp;19:55:41</td>
</tr>
<tr>
<td>LAST_DDL_TIME</td>
<td>25-NOV-2018&nbsp;19:55:41</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>2018-11-25:19:55:41</td>
</tr>
<tr>
<td>STATUS</td>
<td>VALID</td>
</tr>
<tr>
<td>TEMPORARY</td>
<td>N</td>
</tr>
<tr>
<td>GENERATED</td>
<td>N</td>
</tr>
<tr>
<td>SECONDARY</td>
<td>N</td>
</tr>
<tr>
<td>NAMESPACE</td>
<td>2</td>
</tr>
<tr>
<td>EDITION_NAME</td>
<td>null</td>
</tr>
</table>
</div>
</div>
<div id="Master.2">
<div class="masterreport">
<table id="Table.1" cellpadding="0" cellspacing="0" summary="">
<tr>
<th>PRIVILEGE</th>
<th>GRANTEE</th>
<th>GRANTABLE</th>
<th>GRANTOR</th>
<th>OBJECT_NAME</th>
</tr>
<tr onclick="table_onSelectMasterRow(this, 1, 0)" class="currentrow">
<td class="currentcell">EXECUTE</td>
<td class="currentcell">PUBLIC</td>
<td class="currentcell">NO</td>
<td class="currentcell">WTP</td>
<td class="currentcell">WT_TEXT_REPORT</td>
</tr>
</table>
</div>
</div>
<div id="Master.3">
<div class="masterreport">
<table id="Table.2" cellpadding="0" cellspacing="0" summary="">
<tr>
<th>NAME</th>
<th>OWNER</th>
<th>TYPE</th>
<th>OBJECT_ID</th>
<th>STATUS</th>
<th>TYPE_LINK</th>
</tr>
</table>
</div>
</div>
<div id="Master.4">
<div class="masterreport">
<table id="Table.3" cellpadding="0" cellspacing="0" summary="">
<tr>
<th>NAME</th>
<th>OWNER</th>
<th>TYPE</th>
<th>OBJECT_ID</th>
<th>STATUS</th>
<th>TYPE_LINK</th>
</tr>
</table>
</div>
</div>
<div id="Master.5">
<div class="masterreport">
<pre>
package body wt_text_report
as


----------------------
--  Private Procedures
----------------------


------------------------------------------------------------
procedure p
      (in_text  in  varchar2)
is
begin
   dbms_output.put_line(in_text);
end p;

------------------------------------------------------------
procedure result_summary
is
   asrt_cnt     number;
   run_sec      number;
   tc_cnt       number;
   tc_fail      number;
   min_msec     number;
   max_msec     number;
   tot_msec     number;
   avg_msec     number;
   l_yield_txt  varchar2(50);
begin
   asrt_cnt := core_data.g_run_rec.asrt_cnt;
   run_sec  := core_data.g_run_rec.runner_sec;
   tc_cnt   := core_data.g_run_rec.tc_cnt;
   tc_fail  := core_data.g_run_rec.tc_fail;
   min_msec := core_data.g_run_rec.asrt_min_msec;
   max_msec := core_data.g_run_rec.asrt_max_msec;
   tot_msec := core_data.g_run_rec.asrt_tot_msec;
   case nvl(asrt_cnt,0)
        when 0 then avg_msec := 0;
               else avg_msec := tot_msec/asrt_cnt;
   end case;
   case nvl(tc_cnt,0)
        when 0 then l_yield_txt := '(Divide by Zero)';
               else l_yield_txt := to_char(100 * ( 1 - (tc_fail/tc_cnt) )
                                          ,'9999999') || '%';
   end case;
   p('  Minimum Elapsed msec: ' || to_char(min_msec ,'9999999') ||
     '      Total Assertions: ' || to_char(asrt_cnt ,'9999999') );
   p('  Average Elapsed msec: ' || to_char(avg_msec ,'9999999') ||
     '       Total Testcases: ' || to_char(tc_cnt   ,'9999999') );
   p('  Maximum Elapsed msec: ' || to_char(max_msec ,'9999999') ||
     '      Failed Testcases: ' || to_char(tc_fail  ,'9999999') );
   p('  Total Run Time (sec): ' || to_char(run_sec  ,'99990.9') ||
     '        Testcase Yield: ' || l_yield_txt                  );
end result_summary;

------------------------------------------------------------
procedure summary_out
is
begin
   p('');
   p('   wtPLSQL ' || wtplsql.show_version || ' - Start Date/Time: ' ||
         to_char(core_data.g_run_rec.start_dtm, g_date_format) ||
         CHR(10));
   p('Test Results for ' || core_data.g_run_rec.runner_owner ||
                     '.' || core_data.g_run_rec.runner_name  );
   ----------------------------------------
   if core_data.g_run_rec.dbout_name is not null
   then
      p('Database Object Under Test is ' || core_data.g_run_rec.dbout_type  ||
                                     ' ' || core_data.g_run_rec.dbout_owner ||
                                     '.' || core_data.g_run_rec.dbout_name  );
   end if;
   p('----------------------------------------');
   result_summary;
   if core_data.g_run_rec.error_message is not null
   then
      p('');
      p('  *** Test Runner Error ***');
      p(core_data.g_run_rec.error_message);
   end if;
end summary_out;

------------------------------------------------------------
procedure results_out
      (in_show_pass  in boolean)
is
   l_rec            core_data.results_rec_type;
   l_last_testcase  core_data.long_name;
begin
   show_result_header;
   for i in 1 .. core_data.g_results_nt.COUNT
   loop
      if    in_show_pass
         OR NOT core_data.g_results_nt(i).pass
      then
         if core_data.g_results_nt(i).testcase = l_last_testcase
         then
            l_rec := core_data.g_results_nt(i);
            l_rec.testcase := '';
            p(format_test_result(l_rec));
         else
            p(format_test_result(core_data.g_results_nt(i)));
            l_last_testcase := core_data.g_results_nt(i).testcase;
         end if;
      end if;
   end loop;
end results_out;


---------------------
--  Public Procedures
---------------------


------------------------------------------------------------
procedure dbms_out
      (in_detail_level   in  number   default 0
      ,in_summary_last   in  boolean  default FALSE)
is
begin
   --  Setup Display Order
   if in_summary_last
   then
      if in_detail_level >= 10
      then
         results_out(in_detail_level >= 20);
      end if;
      summary_out;
   else
      summary_out;
      if in_detail_level >= 10
      then
         results_out(in_detail_level >= 20);
      end if;
   end if;
   p('');
end dbms_out;


------------------------------------------------------------
procedure ad_hoc_result
is
begin
   p(wt_assert.g_rec.last_msg                     || CHR(10) ||
     ' Assertion ' || wt_assert.g_rec.last_assert ||
                     case wt_assert.last_pass
                     when TRUE then ' PASSED.'
                               else ' FAILED.'
                     end                          || CHR(10) ||
     ' Testcase: ' || wt_assert.g_testcase        || CHR(10) ||
               ' ' || wt_assert.g_rec.last_details );
end ad_hoc_result;


------------------------------------------------------------
procedure show_result_header is begin
   p('');
   p(               core_data.g_run_rec.runner_owner ||
             '.' || core_data.g_run_rec.runner_name  ||
     ' Test Runner Details:' );
   p('----------------------------------------');
end show_result_header;


------------------------------------------------------------
function format_test_result
      (in_rec  in core_data.results_rec_type)
   return varchar2
is
   l_out_str  varchar2(32000) := '';
begin
   if in_rec.testcase is not null
   then
      l_out_str := rpad('---***  ' || in_rec.testcase ||
                        '  ***---'
                       ,80,'-') || CHR(10);
   end if;
   if in_rec.pass
   then
      l_out_str := l_out_str || ' PASS ';
   else
      l_out_str := l_out_str || '#FAIL#';
   end if;
   if in_rec.interval_msecs is not null
   then
      l_out_str := l_out_str || lpad(in_rec.interval_msecs,4) || 'ms ';
   end if;
   if in_rec.message is not null
   then
      l_out_str := l_out_str || in_rec.message  || '. ';
   end if;
   l_out_str := l_out_str || in_rec.assertion || ' - ';
   if g_single_line_output
   then
      l_out_str := l_out_str || replace(replace(in_rec.details
                                               ,CHR(13),'\r')
                                       ,CHR(10),'\n');
   else
      l_out_str := l_out_str || in_rec.details;
   end if;
   return l_out_str;
end format_test_result;


end wt_text_report;</pre>
</div>
</div>
</div>
</body>
</html>
